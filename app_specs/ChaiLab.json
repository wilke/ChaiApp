{
    "id": "ChaiLab",
    "script": "App-ChaiLab",
    "label": "Chai-1 Molecular Structure Prediction",
    "description": "Predict molecular structures using Chai-1, a multi-modal foundation model for proteins, small molecules, DNA, RNA, and glycosylations. Achieves state-of-the-art accuracy across diverse biomolecular prediction benchmarks.",
    "default_memory": "64G",
    "default_cpu": 8,
    "default_runtime": 7200,
    "parameters": [
        {
            "id": "input_file",
            "type": "wsfile",
            "required": 1,
            "label": "Input FASTA File",
            "desc": "Input file in FASTA format describing the molecular complex. Supports proteins, DNA, RNA, and small molecules (SMILES). Use modified residue notation [CCD] for post-translational modifications."
        },
        {
            "id": "constraints_file",
            "type": "wsfile",
            "required": 0,
            "label": "Constraints File (JSON)",
            "desc": "Optional JSON file specifying distance restraints, contact constraints, and covalent bonds to guide structure prediction."
        },
        {
            "id": "use_msa_server",
            "type": "bool",
            "default": true,
            "required": 0,
            "label": "Use MSA Server",
            "desc": "Automatically generate Multiple Sequence Alignments using the ColabFold MMseqs2 server. Recommended for best accuracy."
        },
        {
            "id": "use_templates_server",
            "type": "bool",
            "default": false,
            "required": 0,
            "label": "Use Templates Server",
            "desc": "Automatically search for structural templates to guide prediction. Can improve accuracy for proteins with known homologs."
        },
        {
            "id": "num_samples",
            "type": "int",
            "default": 5,
            "required": 0,
            "label": "Number of Samples",
            "desc": "Number of structure samples to generate. Default is 5, providing a good balance of diversity and runtime."
        },
        {
            "id": "msa_files",
            "type": "list:wsfile",
            "required": 0,
            "label": "Pre-computed MSA Files",
            "desc": "Optional list of pre-computed MSA files in aligned.pqt format (named <sequence_hash>.aligned.pqt). Files are placed in an MSA directory and used instead of the MSA server for matching sequences."
        },
        {
            "id": "msa_directory",
            "type": "folder",
            "required": 0,
            "label": "Pre-computed MSA Directory",
            "desc": "Optional workspace folder containing pre-computed MSA files in aligned.pqt format. Contents are downloaded and used instead of the MSA server."
        },
        {
            "id": "template_hits_file",
            "type": "wsfile",
            "required": 0,
            "label": "Template Hits File (m8)",
            "desc": "Optional m8 file specifying template hits to use for structure prediction."
        },
        {
            "id": "output_path",
            "type": "folder",
            "required": 1,
            "label": "Output Folder",
            "desc": "Workspace folder where prediction results will be saved."
        },
        {
            "id": "dry_run",
            "type": "bool",
            "default": false,
            "required": 0,
            "label": "Dry Run",
            "desc": "Download and prepare all input data but do not execute chai-lab prediction. Useful for testing workspace file access and data preparation."
        },
        {
            "id": "output_file",
            "type": "wsfile",
            "required": 0,
            "label": "Output File",
            "desc": "Optional output file path. Not used by this app (outputs go to output_path folder)."
        }
    ],
    "preflight": {
        "cpu": 8,
        "memory": "64G",
        "runtime": 7200,
        "storage": "50G",
        "policy_data": {
            "gpu_count": 1,
            "partition": "gpu2",
            "constraint": "A100|H100|H200"
        }
    }
}
